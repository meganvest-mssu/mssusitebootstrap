<!-- Events -->
<section class="events">
    <div class="events-header">
        <h2><span>MOSO</span>Events</h2> <a href="/calendar" aria-label="Missouri Southern Calendar" title="View the MSSU Calendar">See more...</a> </div>
    <div id="events_list"></div>
</section>
<script>
    $(function () {
        //Template for event
        function eventTemplate(data) {
            var template = `
                <div class="event-card">
                    <div class="event-card-date-info">
                        <span class="event-card-month">${data.date.toLocaleDateString([], {month: 'long'})}</span>
                        <span class="event-card-date">${data.date.toLocaleDateString([], {day: 'numeric'})}</span>
                        <span class="event-card-day">${data.date.toLocaleDateString([], {weekday: 'long'})}</span>
                    </div>
                    <div class="event-card-info">

<h3 class="event-card-title"><a href="${data.link}">${data.title}</a></h3>
    <span class="event-card-time">${data.date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
    <a class="event-card-link" href="${data.link}">More info <i class="fas fa-info-circle"></i></a>
                    </div>
                </div>`;
            return template;
        }
        $.get('https://www.mssu.edu/calendar/rss/?sID=3', function (data) {
            var $eventsXML = $($.parseXML(data.documentElement.innerHTML)).slice(0, 3);
            var $topThreeEvents = $eventsXML.find("item").slice(0, 3);
            $topThreeEvents.map((i, j) => {
                var date = new Date($(j).find("pubDate").text());
                var title = $(j).find("title").text().split("-").pop().trim();
                var link = $(j).find("link").text();
                var eventData = {
                    date, title, link
                };
                var eventString = eventTemplate(eventData);
                $("#events_list").append(eventString);
            });
        });
    });
</script>
<!-- End Events -->